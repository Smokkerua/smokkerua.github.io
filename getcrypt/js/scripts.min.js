document.addEventListener("DOMContentLoaded", function () {
    const e = document.querySelectorAll(".header_tags .tag");
    let t, o, r = [];

    function n() {
        function n(e, t) {
            t && (t.onclick = (() => new function () {
                e.classList.toggle("open")
            }))
        }
        if (console.log(window.innerWidth >= 1024, window.innerWidth > window.innerHeight), document.querySelector(".header_tags")) {
            let n = document.querySelector(".header_tags")
                , c = document.querySelector(".header_tags .tag_list")
                , i = document.querySelector(".header_tags .tag-wrapper")
                , a = 0
                , s = n.offsetWidth
                , u = i.offsetWidth
                , d = 0
                , y = Array.prototype.slice.call(e)
                , f = r.slice();

            function l(e) {
                if (d = u - 24 - 26, document.querySelector(".header_tags .tag.current"))
                    do {
                        d += f[e], e++
                    } while (d <= s - u - 24 && e < y.length);
                else
                    do {
                        d += f[e], e++
                    } while (d <= s - u - 24 - 26 && e < y.length);
                return e
            }
            a = l(a);
            let h = document.querySelectorAll(".header_tags .tag");
            if (t) {
                if (o() >= a) {
                    let e = f[o()];
                    y.splice(o(), 1), f.splice(o(), 1);
                    let r = a - 1;
                    y.splice(r, 0, t), f.splice(r, 0, e)
                }
                a = l(a = 0)
            }
            Array.prototype.forEach.call(h, function (e) {
                e.remove()
            });
            for (let e = 0; e < a; e++) i.before(y[e]);
            for (let e = a; e < y.length; e++) c.append(y[e]);
            n.style.flexWrap = "nowrap", n.style.overflowY = "visible"
        }
        if (document.querySelector(".last"), document.querySelector(".compilation")) {
            let e, t, o, r = document.querySelectorAll(".compilation .item");
            r.length > 0 && (window.innerWidth < 1024 && window.innerWidth < window.innerHeight ? (e = r[0].querySelector(".item_image").offsetWidth, t = e / 2 * 3, Array.prototype.forEach.call(r, function (e) {
                e.querySelector(".item_image").style.height = t + "px"
            })) : (e = r[0].offsetWidth, t = r[0].classList.contains("wide") ? (e - 40) / 151 * 106 : (e - 40) / 53 * 76, Array.prototype.forEach.call(r, function (e) {
                let r = e.querySelector(".item_image");
                o = e.querySelector(".item_tags"), r.style.height = t + "px", o.style.top = t + "px"
            })))
        }
        if (document.querySelector("#copyLink") && document.querySelector("#copyLink").addEventListener("click", () => {
                let e = document.createElement("input")
                    , t = window.location.href;
                document.body.appendChild(e), e.value = t, e.select(), document.execCommand("copy"), document.body.removeChild(e)
            }), document.querySelector(".header_tags") || document.querySelector(".header_menu") || document.querySelector(".header_notification") || document.querySelector(".header_language") || document.querySelector(".article .share")) {
            let e, t, o, r, l, c, i, a, s, u, d, y, f, h, m;
            document.querySelector(".header_menu") && (e = document.querySelector(".header_menu"), t = e.querySelector(".menu"), o = e.querySelector(".btn-icon")), new n(t, o), document.querySelector(".header_language") && (r = document.querySelector(".header_language"), l = r.querySelector(".language"), c = r.querySelector(".btn-icon")), new n(l, c), document.querySelector(".header_notification") && (i = document.querySelector(".header_notification"), a = i.querySelector(".notification"), s = i.querySelector(".btn-icon")), new n(a, s), document.querySelector(".header_tags") && (u = document.querySelector(".header_tags .tag-wrapper"), d = u.querySelector(".tag_list"), y = u.querySelector(".tag-button")), new n(d, y), document.querySelector(".article .share") && (f = document.querySelector(".article .share"), h = f.querySelector(".share_list"), m = f.querySelector(".share_button")), new n(h, m), document.onclick = (e => {
                let r, n, i, u, f, g, p, q, S, w, _, x, b, L, W, H = e.target;
                document.querySelector(".header_menu") && (r = H === t || t.contains(H), n = H === o, i = t.classList.contains("open")), document.querySelector(".header_language") && (u = H === l || l.contains(H), f = H === c, g = l.classList.contains("open")), document.querySelector(".header_notification") && (p = H === a || a.contains(H), q = H === s, S = a.classList.contains("open")), document.querySelector(".header_tags") && (w = H === d || d.contains(H), _ = H === y, x = d.classList.contains("open")), document.querySelector(".article .share") && (b = H === h || h.contains(H), L = H === m, W = h.classList.contains("open")), document.querySelector(".header_menu") && !r && !n && i && t.classList.toggle("open"), document.querySelector(".header_language") && !u && !f && g && l.classList.toggle("open"), document.querySelector(".header_notification") && !p && !q && S && a.classList.toggle("open"), document.querySelector(".header_tags") && !w && !_ && x && d.classList.toggle("open"), document.querySelector(".article .share") && !b && !L && W && h.classList.toggle("open")
            })
        }
        let c = document.querySelector(".article")
            , i = document.querySelector(".article_image");
        if (c) {
            if (document.querySelector(".article_image-picture").style.height = "auto", i.style.width = "auto", window.innerWidth > window.innerHeight && window.innerWidth >= 640) {
                let e = document.querySelector(".article_image-picture")
                    , t = document.querySelector(".article_image-caption")
                    , o = 0
                    , r = 0;
                if (e.style.height = "auto", c.offsetWidth < 1024) {
                    let t = c.offsetWidth - 640 - 80 - 40;
                    r = t >= 256 ? t <= 408 ? t : 408 : 256, document.querySelector(".article").style.paddingLeft = r + 40 + "px", i.style.width = r + "px", i.offsetHeight + 80 <= window.innerHeight ? (e.querySelector(".vertical").style.display = "block", e.querySelector(".horizontal").style.display = "none", o = 51 * r / 34) : (e.querySelector(".vertical").style.display = "none", e.querySelector(".horizontal").style.display = "block", o = 88 * r / 125)
                }
                else {
                    let n = c.offsetWidth - 640 - 160 - 40;
                    r = n >= 256 ? n <= 408 ? n : 408 : 256, document.querySelector(".article").style.paddingLeft = r + 40 + "px", i.style.width = r + "px", e.querySelector(".vertical").style.display = "block", e.querySelector(".horizontal").style.display = "none", setTimeout(function () {
                        window.innerHeight - e.offsetHeight - t.offsetHeight >= 80 ? o = 51 * r / 34 : (e.querySelector(".vertical").style.display = "none", e.querySelector(".horizontal").style.display = "block", o = 88 * r / 125)
                    }, 200)
                }
                let n = 0
                    , l = 0;
                document.onscroll = function () {
                    if (document.querySelector(".article")) {
                        let e, t = document.querySelector("section.article").offsetHeight
                            , o = document.querySelector(".header").offsetHeight
                            , r = document.querySelector(".banners_container")
                            , c = r.offsetHeight
                            , a = document.querySelector(".banners_wrapper").offsetHeight
                            , s = document.querySelector(".content").offsetHeight
                            , u = pageYOffset - n;
                        c - a > 0 && (c - a > (l += e = u / (s / (c - a + 140))) ? r.style.transform = "translateY(" + -1 * l + "px)" : c - a <= l ? r.style.transform = "translateY(" + -1 * (c - a) + "px)" : l < 0 && (r.style.transform = "translateY(0px)")), pageYOffset > 73 && pageYOffset < o + t - 80 - (i.offsetHeight + 40) ? (i.style.position = "fixed", i.style.top = "40px", i.style.bottom = "auto", i.style.width = i.offsetWidth + "px") : pageYOffset > 73 && pageYOffset >= o + t - 80 - (i.offsetHeight + 40) ? (i.style.position = "absolute", i.style.top = "auto", i.style.bottom = "80px", i.style.width = i.offsetWidth + "px") : (i.style.position = "absolute", i.style.top = "40px", i.style.bottom = "auto", i.style.width = i.offsetWidth + "px"), n = pageYOffset
                    }
                }
            }
            else document.querySelector(".article").style.paddingLeft = "16px";
            c.style.minHeight = i.offsetHeight + 40 + 80 + "px"
        }
    }
    document.querySelector(".header_tags") && (Array.prototype.forEach.call(e, function (e) {
        r.push(e.offsetWidth + 12)
    }), t = document.querySelector(".header_tags .tag.current"), o = function () {
        if (null !== t) return Array.prototype.slice.call(e).indexOf(t)
    }), new n, window.onresize = n
});