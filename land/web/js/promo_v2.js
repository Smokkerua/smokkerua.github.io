(function(a){var b="",c={tryCount:0,retryLimit:3,retryDelay:3e3,success:function(){},error:function(){this.tryCount++,this.tryCount<this.retryLimit&&setTimeout(function(b){a.ajax(b)},this.retryDelay,this)}},d=function(a){for(var b=a.serializeArray(),c={},d=0;d<b.length;d++)val=b[d],-1==val.name.indexOf("[]")?val.value&&(c[val.name]=val.value):val.value&&!c[val.name.replace("[]","")]&&(c[val.name.replace("[]","")]=[],c[val.name.replace("[]","")].push(val.value));return c},e=function(b){return a(".pl_modal").addClass("pl_hidden"),a(".pl_modal_backdrop").removeClass("pl_hidden"),a(b).removeClass("pl_hidden"),!1},f=function(){return a(".pl_modal").addClass("pl_hidden"),a(".pl_modal_backdrop").addClass("pl_hidden"),!1},g=function(a){return a.find(".pl_has_field_error").removeClass("pl_has_field_error"),a.find(".pl_field_error").removeClass("pl_field_error"),a.find(".pl_form_error").remove(),!1},h=function(b,c){if(b.closest(".pl_modal").length){b.parent().addClass("pl_has_field_error"),b.addClass("pl_field_error");var d=a("<div></div>").text(c).addClass("pl_form_error");b.after(d)}else a("#plErrorModal").find(".pl_modal_title").text(""),a("#plErrorModal").find(".pl_modal_body").text(c),e("#plErrorModal");return!1},i=function(){(function(g,a,b,c,d,e){g.iDMPObject={DMPData:!0},g[d]=function(a,b){"match"===a&&(a="autoMatch",b=!0),g.iDMPObject[a]=b},e=a.createElement(b),e.id="iDMPFrame",e.src=c,e.style.width=0,e.style.height=0,e.style.border="none",e.style.visibility="hidden",e.style.position="fixed",e.style.right="200%",e.addEventListener("load",function(){if("undefined"==typeof window.iDMPObject.autoMatch||!0===window.iDMPObject.autoMatch){var a=document.getElementById("iDMPFrame");a=a.contentWindow||a,a.postMessage(JSON.stringify(window.iDMPObject),"*")}window.iDMPData=Object.assign({},window.iDMPObject),window[d]=function(){if("match"===arguments[0]){window.iDMPData.autoMatch=!0;var a=document.getElementById("iDMPFrame");a=a.contentWindow||a,a.postMessage(JSON.stringify(window.iDMPData),"*")}window.iDMPData[arguments[0]]=arguments[1]}}),document.body.appendChild(e),window.addEventListener("message",function(a){"DMPClientDataReady"===a.data&&document.dispatchEvent(new CustomEvent("DMPClientDataReady",{bubbles:!0,detail:{}}))})})(window,document,"iframe","//pixel.metrics0.com/frame.html","idmps"),idmps("clientId","eewmw1jvoghxr6eewnp1jvogmtik"),idmps("accuracy",2),idmps("autoMatch",!1)},j=function(){var b=window.screen,d=o(),e=jQuery.extend({url:"/dStat",type:"POST",data:{width:"undefined"==typeof b?"":b.width,timezone:"undefined"==typeof d?"":d}},c);a.ajax(e)},k=function(b){var d=jQuery.extend({url:"/addInfo",type:"GET",data:b},c);a.ajax(d)},l=function(b){var d=jQuery.extend({url:"/addStat",type:"GET"},c);d.success=b,a.ajax(d)},m=function(b,d,e){var f=jQuery.extend({url:"",type:"POST",data:e},c);f.success=b,f.error=d,a.ajax(f)},n=function(b){var d=jQuery.extend({url:"/getP",type:"POST"},c);d.success=b,a.ajax(d)},o=function(){var a=!1;if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat&&(a=Intl.DateTimeFormat().resolvedOptions().timeZone),!a&&"undefined"!=typeof Date){var b=new Date,c=b.getTimezoneOffset();"number"==typeof c&&(0<c?a="Etc/GMT+"+Math.abs(c/60):0>c?a="Etc/GMT-"+Math.abs(c/60):a="Etc/GMT-0")}return a},p=function(a,b,c,d){return a%=100,19<a&&(a%=10),1===a?b:2===a||3===a||4===a?c:d},q=function(b){"undefined"!=typeof b.web_counters.fb&&fbq("track","Lead");var c=!1;b.s_ym?c=b.s_ym:"undefined"!=typeof b.web_counters.yandex&&(c=b.web_counters.yandex);var d=!1;c&&(d=setTimeout(function(){"undefined"!=typeof yaCounter&&(yaCounter.reachGoal("orderCreated"),d=!1)},3e3)),b.order_created.error?(a("#plErrorModal").find(".pl_modal_title").text(""),a("#plErrorModal").find(".pl_modal_body").text(window.l_loc[b.order_created.error]),e("#plErrorModal")):(e("#plOrderCreatedModal"),a("#plOrderCreatedModal .pl_modal_phone").text(b.order_created.phone),a("#plOrderCreatedModal .pl_btn_success").click(function(){return c&&"undefined"!=typeof yaCounter&&d&&(yaCounter.reachGoal("orderCreated"),clearTimeout(d)),k({right:1}),b.is_subscribe?location.href="/subscribe":(a("#plDuplicateOrderModal").find(".pl_modal_title").text(""),a("#plDuplicateOrderModal").find(".pl_modal_body").text(window.l_loc.l_pl9),e("#plDuplicateOrderModal")),!1}),a("#plOrderCreatedModal .pl_btn_danger").click(function(){return c&&"undefined"!=typeof yaCounter&&d&&(yaCounter.reachGoal("orderCreated"),clearTimeout(d)),k({right:0}),f(),setTimeout(function(){a("input[name=\"order[phone]\"]:first").focus()},500),!1}))},r=function(b){function c(a){var c=window.l_loc[a];return c=c.replace("{{discount_price}}",parseInt(b.p_unload_price)+parseInt(b.p_old_price)),c=c.replace("{{currency}}",b.s_currency),c=c.replace("{{unload_price}}",b.p_unload_price),void 0!==c&&c||(c="-- NO TRANSLATION --"),c}a("[l-loc]").each(function(b,d){var e=a(d).attr("l-loc");html=c(e),a(d).html(html)}),a("[l-loc-value]").each(function(b,d){var e=a(d).attr("l-loc-value");text=c(e),a(d).attr("value",text)})},s=function(b){var c=!1,d=function(){if(!c){c=!0,a("body").append(a("<script />").attr({src:b.protocol+"://"+document.domain+"/noload.js?page="+b.s_page,type:"text/javascript"}));var d=!1;a(document).scroll(function(){d||(d=!0,k({scroll:1,page:b.s_page}))}),setTimeout(function(){k({time:1,page:b.s_page})},3e3)}},f=!1,g=function(b){f||(f=!0,l(d)),a(this).off(b)};"spacer"==b.s_page?d():b.in_frame?(a("body").mousemove(g),a("body").click(g),a("body").scroll(g)):d()},t=function(b){a("form").attr("autocomplete","off"),a("input").attr("autocomplete","false"),a("[name=\"order[phone]\"]").data("inputmask-inited",1).inputmask("ourphone");var c="";a(document).on("focus","[name=\"order[phone]\"]",function(){a(this).data("inputmask-inited")||a(this).data("inputmask-inited",!0).inputmask("ourphone")}),a(document).on("keyup","[name=\"order[phone]\"]",function(){var b=a(this).val().replace(/[^0-9]/g,"");if(0===b.indexOf("789")){var c="79"+b.substr(3);a(this).val(c);var d=a(this).closest("form");d.length&&!d.find("input[name=\"order[phone_fixed]\"]").length&&a("<input/>").attr({type:"hidden",name:"order[phone_fixed]"}).val(1).appendTo(d)}}),"undefined"==typeof b.novalidation&&a(document).on("submit","form",function(){g(a(this));var e=!1;b.s_ga?e=b.s_ga:"undefined"!=typeof b.web_counters.google&&(e=b.web_counters.google);var f=!1;b.s_ym?f=b.s_ym:"undefined"!=typeof b.web_counters.yandex&&(f=b.web_counters.yandex),e&&ga("send","event","main","formSubmit"),f&&"undefined"!=typeof yaCounter&&yaCounter.reachGoal("formSubmit"),phoneEl=a(this).find("[name=\"order[phone]\"]"),c=phoneEl.val();var i=c.replace(/[^0-9]/g,"");if(0==c.length)return h(phoneEl,window.l_loc.l_pl1);if(9>i.length)return h(phoneEl,window.l_loc.l_pl4);if((0===i.indexOf("7")||0===i.indexOf("8"))&&11>i.length)return h(phoneEl,window.l_loc.l_pl4);if(14<i.length)return h(phoneEl,window.l_loc.l_pl5);if(!a(this).find("[name=\"order[timezone]\"]").length){var j=o();j&&a("<input/>").attr({type:"hidden",name:"order[timezone]"}).val(j).appendTo(this)}return a("body").block(),m(function(c){a("body").unblock(),b.order_created=c.order_created,"undefined"!=typeof b.order_created.phone&&(a("input[name=\"order[fio]\"]").val(b.order_created.fio),a("input[name=\"order[phone]\"]").val(b.order_created.phone),a("select[name=\"order[country]\"]").val(b.order_created.country),a("#created-block-1").text(b.order_created.phone)),q(b)},function(){a("body").unblock(),h(phoneEl,window.l_loc.l_pl54)},d(a(this))),!1})},u=function(b){a(".pl_product_currency[type=\"full\"]").each(function(c,d){var e=a(d).siblings().filter(function(){return a.isNumeric(a(this).text())}),f=parseInt(e.text());if(f||(f=1),f)switch(b.s_currency){case"RUB":a(d).text(p(f,"\u0440\u0443\u0431\u043B\u044C","\u0440\u0443\u0431\u043B\u044F","\u0440\u0443\u0431\u043B\u0435\u0439"));}})};window.plShowCallBackForm=function(){return g(a("#plCallbackModal").find("form")),e("#plCallbackModal"),!1};var v=function(b){var c="",d=!1,f=!0,c="";if("undefined"!=typeof b.p_unload_button&&"on"==b.p_unload_button){function c(){setInterval(function(){a("#kmacb").is(":visible")||a(".pl_modal_backdrop").is(":visible")||a("#kmacb").show()},1e3)}var g=parseInt(b.p_unload_delay);0<g?setTimeout(function(){a("#kmacb").show(),c()},1e3*g):(a("#kmacb").show(),c())}window.test_showMeCallBackMobileForm=function(){a("#ps-call-pc-form").hide(),a("#ps-call-mobile-form").show(),window.plShowCallBackForm()},window.test_showMeCallBackPcForm=function(){a("#ps-call-pc-form").show(),a("#ps-call-mobile-form").hide(),window.plShowCallBackForm()},"undefined"!=typeof b.p_comeback_form&&"callme"==b.p_comeback_form&&(a(document).mouseleave(function(b){a("#ps-popup-call").is(":hidden")&&f&&10>b.clientY&&(d=setTimeout(function(){f=!1,window.plShowCallBackForm()},500))}),a(document).mouseenter(function(){a("#ps-popup-call").is(":hidden")&&d&&clearTimeout(d)})),a("#fancy-button-callback").click(function(){return f=!1,c||n(function(b){b.prefix&&(c=b.prefix.replace(/-/g,"").split(""),c=c[0]+c[1]+c[2]+"-"+c[3]+c[4]+c[5]+"-"+c[6]+c[7]+c[8]+"-"+c[9]+c[10]+c[11]+"-"+c[12]+c[13],a(".prefix_value").text(c),a(".prefix_container").show())}),e("#plCallbackModal"),a("#kmacb").hide(),!1})},w=function(b){function c(a,b){return Math.floor(Math.random()*(b-a+1))+a}var d=!1,f=function(){if(!d){d=!0;var f=function(b){var c=1==a(b).css("opacity")?.5:1;a(b).animate({opacity:c},300,function(){f(b)})},g=function(b,c){a(b).css("color",c),c="red"==c?"red":"#00a651",a(b).closest(".ps-diagramm").find("input").trigger("configure",{fgColor:c}),a(b).closest(".ps-diagramm").find("canvas").css("border","1px solid "+c)},h=function(){e("#plComebackerModal"),a("#kmacb").length&&a("#kmacb").hide();var b=parseInt(a("#ps-popup-sale-clients").text()),d=[3,12],h=[10,22],i=function(){g(a("#ps-popup-sale-clients"),"red");var b=parseInt(a("#ps-popup-sale-clients").text()),e=(b-29)/70;a("#ps-popup-sale-clients").closest(".ps-diagramm").fadeOut("slow",function(){a("#ps-popup-sale-clients").text(b+1),a("#ps-popup-sale-clients").closest(".ps-diagramm").find("input").val(b+1).trigger("change"),g(a("#ps-popup-sale-clients"),"black"),a("#ps-popup-sale-clients").closest(".ps-diagramm").fadeIn("slow",function(){999>b&&(99<b&&a("#ps-popup-sale-clients").css("fontSize","20px"),setTimeout(i,1e3*c(d[0]+(d[1]-d[0])*e,h[0]+(h[1]-h[0])*e)))})})},j=parseInt(a("#ps-popup-sale-goods").text()),k=[3,12],l=[10,22],m=function(){g(a("#ps-popup-sale-goods"),"red");var b=parseInt(a("#ps-popup-sale-goods").text()),d=1-b/j;a("#ps-popup-sale-goods").closest(".ps-diagramm").fadeOut("slow",function(){a("#ps-popup-sale-goods").text(b-1),a(".ps-landing-limit-left").text(b-1),a(".p_limit_left_text").text(b-1),4<b-1?a("#ps-popup-sale-goods-text").text(window.l_loc.l_pl17):4>=b-1&&1<b-1?a("#ps-popup-sale-goods-text").text(window.l_loc.l_pl41):a("#ps-popup-sale-goods-text").text(window.l_loc.l_pl42),a("#ps-popup-sale-goods").closest(".ps-diagramm").find("input").val(b+1).trigger("change"),g(a("#ps-popup-sale-goods"),"black"),a("#ps-popup-sale-goods").closest(".ps-diagramm").fadeIn("slow",function(){2<b?setTimeout(m,1e3*c(k[0]+(k[1]-k[0])*d,l[0]+(l[1]-l[0])*d)):(g(a("#ps-popup-sale-goods"),"red"),a("#ps-popup-sale-warning").show(),f(a("#ps-popup-sale-warning")),f(a("#ps-popup-sale-goods").closest(".ps-diagramm")))})})};setTimeout(i,1e3*c(d[0],h[0])),setTimeout(m,1e3*c(k[0],l[0]))};window.onbeforeunload=function(){var c=a(".pl_product_price:first").attr("prefix");c=c?" "+c:"",a(".pl_product_price").text(parseInt(b.price)-parseInt(b.p_unload_price)+c),a("[name=\"order[discount]\"]").val(b.p_unload_price),a("#onbeforeunload_block").show(),window.onbeforeunload=null,window.comeBackerDone=!0,a("#onbeforeunload_audio").get(0).play();var d=["******************************",window.l_loc.l_pl25,"******************************",window.l_loc.l_pl26,window.l_loc.l_pl27,window.l_loc.l_pl28].join("\n");return navigator.userAgent&&(-1<navigator.userAgent.search(/Firefox/)?h():setTimeout(h,500)),setTimeout(function(){a("#onbeforeunload_block").hide()},500),d}}};b.in_frame?(a("body").mousemove(f),a("body").click(f),a("body").scroll(f)):f(),a(window).resize(function(){var b=parseInt(a(window).height());b&&(365>b?a(".hiddable").hide():a(".hiddable").show())})},x=function(b){b.cyr_city?a(document).ready(function(){0<a(".pl_landing_geo_detect").length&&a(".pl_landing_geo_detect").text(b.cyr_city)}):a(document).ready(function(){0<a(".pl_landing_geo_detect").length&&("kz"==b.s_country&&a(".pl_landing_geo_detect").text("\u0410\u0441\u0442\u0430\u043D\u0430"),"ru"==b.s_country&&a(".pl_landing_geo_detect").text("\u041C\u043E\u0441\u043A\u0432\u0430"),"ua"==b.s_country&&a(".pl_landing_geo_detect").text("\u041A\u0438\u0435\u0432"))})},y=function(b){b.cyr_city?a(document).ready(function(){0<a(".pl_spacer_geo_detect").length&&a(".pl_spacer_geo_detect").text(b.cyr_city)}):a(document).ready(function(){0<a(".pl_spacer_geo_detect").length&&("kz"==b.s_country&&a(".pl_spacer_geo_detect").text("\u0410\u0441\u0442\u0430\u043D\u0430"),"ru"==b.s_country&&a(".pl_spacer_geo_detect").text("\u041C\u043E\u0441\u043A\u0432\u0430"),"ua"==b.s_country&&a(".pl_spacer_geo_detect").text("\u041A\u0438\u0435\u0432"))})},z=function(b){var c="";a(function(){c=a("<iframe></iframe>").css({width:"100%",height:"100%",top:"0px",left:"0px",bottom:"0px",right:"0px",position:"fixed",border:"none",display:"none"}).attr("id","s_comebacker_iframe").attr("src","//"+b.clean_domain+"/?out=1&in=1"),c.appendTo("body")}),a(function(){a("a").click(function(){window.onbeforeunload=null});var b=!0,d=!1,e=function(d){a("#s_comebacker_block").show(),a("#s_comebacker_audio").get(0).play();var e=["******************************",window.l_loc.l_pl25,"******************************",window.l_loc.l_pl29,window.l_loc.l_pl30,window.l_loc.l_pl31].join("\n");return window.onbeforeunload=null,b=!1,window.activityReport=void 0,c.show(),jQuery("body").children().not("#s_comebacker_iframe").not("#s_comebacker_block").not("#s_comebacker_block_style").not("#s_comebacker_audio").remove(),a("body").css("background","transparent"),d?setTimeout(function(){a("#s_comebacker_block").hide()},d):a(document).mouseenter(function(){a("#s_comebacker_block").hide()}),e};"undefined"==typeof window.onbeforeunload?(a(document).mouseenter(function(){a("#fancy-container-callback").is(":hidden")&&d&&clearTimeout(d)}),a(document).mouseleave(function(c){a("#s_comebacker_block").is(":hidden")&&b&&10>c.clientY&&(a("#s_comebacker_block").find("img").attr("src","/img/wait5.png"),d=setTimeout(function(){e(!1)},500))})):window.onbeforeunload=function(){var a=e(500);return a}})},A=function(){var b="",c=!1,d=!0,b="";a(document).mouseleave(function(b){a("#ps-popup-out-comebacker").is(":hidden")&&d&&10>b.clientY&&(c=setTimeout(function(){d=!1,a("#plSpecialModal").find(".pl_modal_content").append(a(".out-comebacker-content")),e("#plSpecialModal")},500))}),a(document).mouseenter(function(){a("#ps-popup-out-comebacker").is(":hidden")&&c&&clearTimeout(c)}),a("#ps-popup-out-comebacker-close").click(function(){d=!1})},B=function(b){if(a(".ps-dial-lg").knob(),a(".ps-dial-sm").knob(),a(".pl_modal_dialog").click(function(a){a.stopPropagation()}),a(".pl_modal").click(f),a(".pl_modal .popup-close").click(f),a("#plDuplicateOrderModal").find(".pl_btn_success").click(f),a("#plErrorModal").find(".pl_btn_danger").click(f),a(".pl_scroll_to_target").click(function(){var b=a(this).attr("scroll-to");return b&&(f(),a("html, body").animate({scrollTop:a(b).offset().top},500)),!1}),a("#ps-popup-out-comebacker").find("img").each(function(){a(this).attr("src",a(this).data("src"))}),b.is_preview||i(),r(b),"spacer"==b.s_page&&("undefined"==typeof b.order_created&&!b.is_preview&&(("undefined"!=typeof b.p_spacer_unload_script&&"on"==b.p_spacer_unload_script||"undefined"!=typeof b.p_spacer_comeback_form&&"redirrect"==b.p_spacer_comeback_form)&&b.comebacker_allowed&&z(b),"undefined"!=typeof b.p_spacer_comeback_form&&"special"==b.p_spacer_comeback_form&&A(b)),!b.is_preview&&y(b)),"landing"==b.s_page&&("undefined"==typeof b.order_created&&"undefined"!=typeof b.p_comeback_form&&("discount"==b.p_comeback_form&&!b.is_one_rub&&!b.is_free&&b.comebacker_allowed&&w(b),v(b)),!b.is_preview&&x(b)),"spacer"==b.s_page||"landing"==b.s_page){b.is_preview||s(b);var c=a("select[name=\"order[country]\"]"),d=a("input[name=\"order[phone]\"]"),e=a("input[name=\"order[fio]\"]");("ru"==b.s_country||"kz"==b.s_country)&&d.val(b.phone_codes[b.s_country]),c.val(b.s_country),"undefined"!=typeof b.order_created&&("undefined"!=typeof b.order_created.phone&&(e.val(b.order_created.fio),d.val(b.order_created.phone),c.val(b.order_created.country)),q(b)),a("form").submit(function(){window.onbeforeunload=null}),b.s_collected||b.is_preview||j(),u(b),t(b)}};a.fn.lFunctions=function(){return B.apply(this,arguments)}})(jQuery);